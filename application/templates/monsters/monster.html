{% extends "layout.html" %}

{% block body %}

</br>

<form method="GET" action="{{ url_for('monsters_index') }}">
  <button type="submit" class="btn btn-light">To Index</button>
</form>

</br>

<i> Created by {{ monster.account_name }} </i>
<h2> {{ monster.name }} </h2>

<i> {{ monster.size }} {{ monster.mtype }} </i> </br>
</br>

<b> Armor Class </b> {{ monster.ac }} </br>
<b> Hit Points </b> {{ monster.hp }} </br>
<b> Speed </b> {{ monster.spd }} </br>

</br>

<table>
  <colgroup>
    <col span="1">
  </colgroup>
  <tr>
    <th><b>STR</b></th>
    <th><b>DEX</b></th>
    <th><b>CON</b></th>
    <th><b>INT</b></th>
    <th><b>WIS</b></th>
    <th><b>CHA</b></th>
  </tr>
  <tr>
    <td>{{ monster.stre }}</td>
    <td>{{ monster.dex }}</td>
    <td>{{ monster.con }}</td>
    <td>{{ monster.inte }}</td>
    <td>{{ monster.wis }}</td>
    <td>{{ monster.cha }}</td>
  </tr>
</table>

</br>

{% if monster.saves != "" %}
        <b> Saving Throws </b> {{ monster.saves }} </br>
{% endif %}

{% if monster.skills != "" %}
        <b> Skills </b> {{ monster.skills }} </br>
{% endif %}

{% if monster.weakto != "" %}
        <b> Vulnerabilities </b> {{ monster.weakto }} </br>
{% endif %}

{% if monster.resist != "" %}
        <b> Resistances </b> {{ monster.resist }} </br>
{% endif %}

{% if monster.immun != "" %}
        <b> Immunities </b> {{ monster.immun }} </br>
{% endif %}

{% if monster.coimmun != "" %}
        <b> Condition Immunities </b> {{ monster.coimmun }} </br>
{% endif %}

<b> Senses </b> {{ monster.sens }} </br>
<b> Challenge </b> {{ monster.cr }} </br>
</br>
{% if traits %}
{% for trait in traits %}
<div>
  <p><b><i>{{ trait.name }}{% if trait.usage != "" %} ({{ trait.usage }}){% endif %}</i>. </b><span class="descrip">{{ trait.content }}</span></p>
</div>
{% endfor %}
{% endif %}
{% if actions %}
<h5>ACTIONS</h5>
{% for action in actions %}
<div>
  <p><b><i>{{ action.name }}{% if action.usage != "" %} ({{ action.usage }}){% endif %}</i>. </b>{{ action.content }}</p>
</div>
{% endfor %}
{% endif %}

{% if reactions %}
<h5>REACTIONS</h5>
{% for reaction in reactions %}
<div>
  <p><b><i>{{ reaction.name }}. </i></b>{{ reaction.content }}</p>
</div>
{% endfor %}
{% endif %}

{% if legendaries %}
<h5>LEGENDARY ACTIONS</h5>
{% if monster.l_points != 1 %}
<div>The {{ monster.name }} can take {{ monster.l_points }} legendary actions, choosing from the options below. Only one legendary action can be used at a time and only at the end of another creature's turn. The {{ monster.name }} regains spent legendary actions at the start of its turn.</div>
{% else %}
<div>The {{ monster.name }} can take {{ monster.l_points }} legendary action, choosing from the options below. Only one legendary action can be used at a time and only at the end of another creature's turn. The {{ monster.name }} regains spent legendary actions at the start of its turn.</div>
{% endif %}
{% for lege in legendaries %}
<div>
  <p><b>{{ lege.name }}{% if lege.cost > 1 %} (Costs {{ lege.cost }} Actions){% endif %}. </b>{{ lege.content }}</p>
</div>
{% endfor %}
{% endif %}

<div>
  <span class="descrip"><i>{{ monster.descrip }}</i></span>
</div>

</br>
{% if authorized %}
{% if monster.public %}
<i>Public</i>
{% else %}
<i>Private</i>
{% endif %}
</br><br>
<table>
  <tr>
    <td>
      <form method="POST" action="{{ url_for('monsters_toggle_public', monster_id=monster.id) }}">
        <button type="submit" class="btn btn-light">Toggle Publicity</button>
      </form>
    </td>
    <td>
      <button type="button" class="btn btn-light text-danger" data-toggle="collapse" data-target="#confirm_window">Delete</button>
    </td>
    <td>
      <form method="GET" action="{{ url_for('monsters_edit', monster_id=monster.id) }}">
        <button type="submit" class="btn btn-light">Edit</button>
      </form>
    </td>
  </tr>
</table>
<br>
<form method="POST" action="{{ url_for('monsters_remove', monster_id=monster.id) }}">
  <div class="collapse" id="confirm_window">
    <div class="card card-body" style="width: 14rem;">
      <h5 class="card-title text-danger text-center">Warning</h5>
      <div class="row">
        <div class="col-auto text-center"><b>Are you sure you want to delete this monster?</b></div>
      </div><br>
      <div class="row">
        <div class="col-auto">
          <button type="button" class="btn btn-secondary" data-toggle="collapse" data-target="#confirm_window">Cancel</button>
        </div>
        <div class="col-auto">
          <button type="submit" class="btn btn-danger">Delete</button>
        </div>
      </div>
    </div>
  </div>
</form>
<br><br>
{% endif %}

{% endblock %}
