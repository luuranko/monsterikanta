{% extends "layout.html" %}
{% block body %}

<div class="row">
  <div class="col-auto">
    <h6>Users ranked by amount of monsters created</h6>
  </div>
</div>
<div class="row">
  <div class="col-auto">
    <button type="button" class="btn btn-light" data-toggle="collapse" data-target="#most_monsters">Show Ranking</button>
  </div>
</div>
<br>

<div class="row">
  <div class="col-auto">
    <div id="most_monsters" class="collapse">
      <table class="table table-light table-sm">
        <thead>
          <tr>
            <th scope="col" class="text text-center">User</th>
            <th scope="col" class="text text-center">Monsters</th>
          </tr>
        </thead>
        <tbody>
          {% for user in users %}
          <tr>
            <td class="text text-center">{{ user.name }}</td>
            <td class="text text-center">{{ user.id }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<h5>Search</h5>
<form method="POST" action="{{ url_for('monsters_index') }}">
  <div class="form-group row">
    <div class="col-4">
      {{ form.name(placeholder="Name", id="name", class="form-control", maxlength="35") }}
    </div>
    <div class="col-auto">
      {{ form.size(id="size", class="form-control") }}
    </div>
    <div class="col-auto">
      {{ form.mtype(id="mtype", class="form-control") }}
    </div>
  </div>
  <div class="form-group row">
    <div class="col-auto">
      {{ form.cr(id="cr", class="form-control") }}
    </div>
    <div class="col-auto">
      {{ form.legendary(id="legendary", class="form-control") }}
    </div>
  </div>
  <div class="form-group row">
    <div class="col-auto">
      {{ form.whose(id="whose", class="form-control") }}
    </div>
    <div class="col-auto">
      {{ form.owner(placeholder="Creator", id="owner", class="form-control") }}
    </div>
  </div>
  <button type="submit" class="btn btn-light"><b>Search</b></button>
</form>
<br>

<h5>Monsters</h5>
{% if monsters %}

<div class="row">
<div class="col-auto">
<table class="table table-light">
  <thead>
    <tr>
      <th scope="col" class="text text-center">Monster</th>
      <th scope="col" class="text text-center">Size</th>
      <th scope="col" class="text text-center">Type</th>
      <th scope="col" class="text text-center">CR</th>
      <th scope="col" class="text text-center">Public</th>
      <th scope="col" class="text text-center">Creator</th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    {% for monster in monsters %}
    <tr>
      <td class="text text-center">{{ monster.name }}</td>
      <td class="text text-center">{{ monster.size }}</td>
      <td class="text text-center">{{ monster.mtype }}</td>
      <td class="text text-center">{{ monster.cr }}</td>
      {% if monster.public %}
      <td class="text text-center"> Yes </td>
      {% else %}
      <td class="text text-center"> No </td>
      {% endif %}
      <td class="text text-center"> {{ monster.account_name }}</td>
      <td>
        <form method="GET" action="{{ url_for('monsters_show', monster_id=monster.id) }}">
          <button type="submit" class="btn btn-outline-dark btn-sm">Show</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
</div>
</div>

{% else %}
<br><p>No results.</p>
{% endif %}

{% endblock %}
